# set -g default-shell /bin/bash

# Set the default terminal to a 256-color screen
set -g default-terminal "screen-256color"

# Set the prefix key to Ctrl-w
set -g prefix C-w
unbind C-b
bind-key C-w send-prefix

# Split panes vertically and horizontally
unbind %
bind | split-window -h

unbind '"'
bind - split-window -v

# Reload the configuration file
unbind r
bind r source-file ~/.tmux.conf

# Keybindings for resizing panes
# Resizing panes down, up, right, and left
bind -r j resize-pane -D 5
bind -r k resize-pane -U 5
bind -r l resize-pane -R 5
bind -r h resize-pane -L 5

# Ensure tmux recognizes the control key for pane switching
bind-key C-h if-shell "[[ $(tmux display -p '#{pane_in_mode}') -eq 1 ]]" "send-keys C-h" "select-pane -L"
bind-key C-j if-shell "[[ $(tmux display -p '#{pane_in_mode}') -eq 1 ]]" "send-keys C-j" "select-pane -D"
bind-key C-k if-shell "[[ $(tmux display -p '#{pane_in_mode}') -eq 1 ]]" "send-keys C-k" "select-pane -U"
bind-key C-l if-shell "[[ $(tmux display -p '#{pane_in_mode}') -eq 1 ]]" "send-keys C-l" "select-pane -R"

# Zoom/unzoom the current pane
bind -r m resize-pane -Z

# Enable mouse support for switching panes, scrolling, and resizing
set -g mouse on

# Use Vim keybindings in copy mode
set-window-option -g mode-keys vi

# Start selection in copy mode with 'v'
bind-key -T copy-mode-vi 'v' send -X begin-selection

# The tmux-yank plugin now handles copying to the system clipboard with 'y'.
# The following line is no longer necessary, as the plugin provides this functionality.
# bind-key -T copy-mode-vi 'y' send -X copy-selection

# Prevent exiting copy mode after dragging with the mouse
unbind -T copy-mode-vi MouseDragEnd1Pane

# Disable the bottom status line
set-option -g status off

# --- TPM (Tmux Plugin Manager) ---
set -g @plugin 'tmux-plugins/tpm'

# List of tmux plugins
set -g @plugin 'christoomey/vim-tmux-navigator' # For navigating panes and vim/nvim with Ctrl-hjkl
set -g @plugin 'jimeh/tmux-themepack'          # For configuring a tmux theme
# set -g @plugin 'tmux-plugins/tmux-resurrect'    # To persist tmux sessions after a computer restart
set -g @plugin 'tmux-plugins/tmux-continuum'   # Automatically saves sessions for you every 15 minutes
set -g @plugin 'tmux-plugins/tmux-yank'         # The new plugin to copy to the system clipboard

# Tmux-yank configuration
# Use xclip on Linux (common)
set -g @tmux-yank 'xclip'
# Uncomment the line below for xsel on Linux
# set -g @tmux-yank 'xsel'
# Uncomment the line below for pbcopy on macOS
# set -g @tmux-yank 'pbcopy'

# Theme configuration
set -g @themepack 'powerline/default/cyan'

# Tmux-resurrect and tmux-continuum settings
# set -g @resurrect-capture-pane-contents 'on' # Allow tmux-ressurrect to capture pane contents
# set -g @continuum-restore 'on'               # Enable tmux-continuum functionality

# --- Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf) ---
run '~/.tmux/plugins/tpm/tpm'
